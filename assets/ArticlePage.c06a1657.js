import{f as Y,A as J,n as Q,M as ee,N as te,I as ae}from"./element-plus.0e1471b6.js";import{l as Z,r as m,e as r,w as oe,d as ne,a8 as le,c as I,Z as o,S as n,P as se,u as t,ab as re,n as M,o as h,X as w,Y as k,R as P,W as j,L as ie,T as L,U as q,V as X,a as U,a6 as ue}from"./@vue.ae71f803.js";import{j as ce,k as pe}from"./@element-plus.681668a3.js";import{_ as de,s as me,u as fe,a as he,b as ve}from"./ArticleEditDialog.vuevuetypescriptsetuptruelang.46e9833a.js";import{u as G}from"./vue-i18n.cb61a333.js";import"./lodash-es.2e433212.js";import"./@vueuse.f8c502e5.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./dayjs.5bdc91a4.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.6dc68714.js";import"./is.84ee87a3.js";import"./index.a782ff1d.js";import"./vue-echarts.23b66ad5.js";import"./resize-detector.4e96b72b.js";import"./echarts.d349f57c.js";import"./tslib.60310f1a.js";import"./zrender.6e8dd875.js";import"./pinia.d4e83f12.js";import"./vue-demi.65474690.js";import"./xe-utils.e9a24773.js";/* empty css                     */import"./vxe-table.25833a37.js";import"./axios.c924aa86.js";import"./form-data.d1f94bc2.js";import"./js-cookie.31874410.js";import"./@wangeditor.319f2da9.js";import"./yup.9b2b43ad.js";import"./nanoclone.7d3cb5fe.js";import"./lodash.1c56cec1.js";import"./property-expr.48609aa3.js";import"./toposort.5e0934c4.js";import"./vue-router.56ffce2e.js";import"./nprogress.554036ec.js";import"./@intlify.372ce312.js";const ge=Z({__name:"SearchFilter",props:{options:{type:Array,required:!0},model:{type:Object,required:!0},loading:{type:Boolean,default:!1},searchDisabled:{type:Boolean,default:!1},resetDisabled:{type:Boolean,default:!1},showExpand:{type:Boolean,default:!1},showReset:{type:Boolean,default:!0}},emits:["search","reset"],setup(i,{emit:f}){const v=i,u=m(!1),_=m(0),b=m(!0),O=m(0),$=300,C=m(),y=m({}),{t:z}=G(),a=r(()=>{let e=Math.floor(_.value/$)||3;return e>4&&(e=4),e<1&&(e=1),e}),F=r(()=>v.showExpand&&x.value.length>a.value),D=r(()=>({span:24/a.value})),l=r(()=>v.options.filter(e=>!e.hidden)),V=r(()=>{let e=[],p=D.value.span;if(l.value.length<a.value-1)p=(a.value-l.value.length%a.value)*24/a.value,e=[...l.value];else for(let d=0;d<l.value.length;d++){const S=l.value[d];if(e.push(S),e.length>=a.value-1)break}return e.push({name:"search",scopedSlot:"search",colSpan:{span:p}}),e}),x=r(()=>{const e=(a.value-l.value.length%a.value)*24/a.value;return[...l.value,{name:"search",scopedSlot:"search",colSpan:{span:e}}]}),W=r(()=>u.value||!v.showExpand?x:V.value),g=m();function A(e){f("search",e)}function B(){var e;(e=C.value)==null||e.submit()}function E(){N(),M(()=>{f("reset")})}function N(...e){C.value.resetFields(...e)}function K(){u.value=!u.value}function c(){!b.value||(b.value=!1,O.value=setTimeout(()=>{g.value&&(_.value=g.value.offsetWidth,b.value=!0)},300))}function T(){M(()=>{_.value=g.value.clientWidth}),window.addEventListener("resize",c,!1)}return oe(()=>v.model,e=>{y.value=e},{immediate:!0}),ne(()=>{T()}),le(()=>{}),(e,p)=>{const d=Y,S=J,R=Q;return h(),I("div",{ref_key:"filterWrapRef",ref:g},[o(de,se({ref_key:"form",ref:C},e.$attrs,{value:y.value,"onUpdate:value":p[0]||(p[0]=s=>y.value=s),options:t(W).value,layout:"inline","col-span":t(D),gutter:12,onSubmit:A,onKeyup:re(B,["enter"])}),{search:n(()=>[o(S,null,{default:n(()=>[o(d,{type:"primary",icon:"search",loading:i.loading,disabled:i.searchDisabled,onClick:B},{default:n(()=>[w(k(t(z)("page.common.btn.search")),1)]),_:1},8,["loading","disabled"]),i.showReset?(h(),P(d,{key:0,type:"primary",icon:"brush",loading:i.loading,disabled:i.resetDisabled,onClick:E},{default:n(()=>[w(k(t(z)("page.common.btn.reset")),1)]),_:1},8,["loading","disabled"])):j("",!0)]),_:1}),ie(e.$slots,"extraButtons",{loading:i.loading}),t(F)?(h(),I("a",{key:0,onClick:K},[w(k(u.value?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),L(o(R,null,{default:n(()=>[(h(),P(X(t(ce))))]),_:1},512),[[q,u.value]]),L(o(R,null,{default:n(()=>[(h(),P(X(t(pe))))]),_:1},512),[[q,!u.value]])])):j("",!0)]),_:3},16,["value","options","col-span","onKeyup"])],512)}}}),_e={class:"relative w-full"},be={class:"p-[8px] absolute w-full"},Ce={class:"mx-3 mt-5"},ye={class:"float-right mt-2"},rt=Z({__name:"ArticlePage",setup(i){const{t:f}=G(),v={title:"",content:"",type:""},{articleFilterOptions:u,articleColumns:_}=me(),b=m(v),O=r(()=>u.value),$=r(()=>C.value.length===0),{ids:C,loading:y,dataSource:z,ipagination:a,modalFormRef:F,loadData:D,handleSizeChange:l,handleCurrentChange:V,handleSelectionChange:x,handleOpenAddDialog:W,handleOpenEditDialog:g,handleDelete:A,handleBatchDelete:B,handleSearch:E,handleReset:N}=fe(he);return(K,c)=>{const T=ge,e=Y,p=ee,d=ue("c-table"),S=te,R=ae;return h(),I("div",_e,[U("div",be,[U("div",Ce,[o(T,{model:b.value,options:t(O),"show-reset":!0,onReset:t(N),onSearch:t(E)},null,8,["model","options","onReset","onSearch"])]),L((h(),P(d,{"table-data":t(z),"show-header":!0,columns:t(_),"header-align":"right",stripe:"",style:{width:"100%"},onSelectionChange:t(x)},{options:n(()=>[o(e,{icon:"refresh",circle:"",onClick:t(E)},null,8,["onClick"]),o(e,{type:"primary",icon:"plus",circle:"",onClick:t(W)},null,8,["onClick"]),o(p,{title:t(f)("page.common.btn.batchDelete_popover"),onConfirm:c[0]||(c[0]=s=>t(B)())},{reference:n(()=>[o(e,{disabled:t($),type:"danger",icon:"delete",circle:""},null,8,["disabled"])]),_:1},8,["title"])]),actions:n(({scope:s})=>[o(e,{size:"small",onClick:H=>t(g)(s.row)},{default:n(()=>[w(k(t(f)("page.common.btn.edit")),1)]),_:2},1032,["onClick"]),o(p,{title:t(f)("page.common.btn.delete_popover"),onConfirm:H=>t(A)(s.row.id)},{reference:n(()=>[o(e,{size:"small",type:"danger"},{default:n(()=>[w(k(t(f)("page.common.btn.delete")),1)]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["table-data","columns","onSelectionChange"])),[[R,t(y)]]),U("div",ye,[o(S,{currentPage:t(a).current,"onUpdate:currentPage":c[1]||(c[1]=s=>t(a).current=s),"page-size":t(a).pageSize,"onUpdate:page-size":c[2]||(c[2]=s=>t(a).pageSize=s),small:"","page-sizes":t(a).pageSizeOptions,background:!0,layout:"sizes, prev, pager, next",total:t(a).total,onSizeChange:t(l),onCurrentChange:t(V)},null,8,["currentPage","page-size","page-sizes","total","onSizeChange","onCurrentChange"])])]),o(ve,{ref_key:"modalFormRef",ref:F,onClose:t(D)},null,8,["onClose"])])}}});export{rt as default};
