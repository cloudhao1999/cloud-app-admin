var H=Object.defineProperty;var g=(s,e,t)=>e in s?H(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var m=(s,e,t)=>(g(s,typeof e!="symbol"?e+"":e,t),t);import{C as T}from"./element-plus.0e1471b6.js";import{C as b,r as f,_ as R}from"./index.a782ff1d.js";import{r as p,n as A,e as v,o as i,c as B,L as C,l as I,a6 as w,R as r,S as n,u as S,_ as y,Z as x,a as E,az as N,V as k,W as _}from"./@vue.ae71f803.js";import{p as V}from"./@vueuse.f8c502e5.js";class L{constructor(){m(this,"history",V(b.HISTORY_MENU,[]));m(this,"route",p(null));m(this,"isRouterAlive",p(!0));this.history.value=this.getHistoryTab()}removeHistoryTab(e){const t=this.history.value.indexOf(e);this.history.value.splice(t,1)}addHistoryTab(e){var o,c;if(!((o=e.meta)!=null&&o.menu))return;this.route.value=e;const t={...(c=e.meta)==null?void 0:c.menu,route:e.name};this.history.value.some(h=>h.route==e.name)||this.history.value.unshift(t),this.history.value.length>10&&this.history.value.pop()}reload(){this.isRouterAlive.value=!1,A(()=>{this.isRouterAlive.value=!0})}closeSelf(){const e=this.history.value.find(a=>{var o;return a.route==((o=this.route.value)==null?void 0:o.name)}),t=this.history.value.length;if(e&&t>1){this.removeHistoryTab(e);const a=this.history.value[t-2];f.push({name:a.route})}}calcalateHistoryIndex(){return this.history.value.findIndex(e=>{var t;return e.route==((t=this.route.value)==null?void 0:t.name)})}isTop(){return v(()=>this.calcalateHistoryIndex()===0)}isBottom(){return v(()=>{const e=this.history.value.length;return this.calcalateHistoryIndex()===e-1})}closeLeft(){if(!this.isTop().value){const e=this.calcalateHistoryIndex();this.history.value.splice(0,e)}}closeRight(){if(!this.isBottom().value){const e=this.calcalateHistoryIndex();this.history.value.splice(e+1)}}closeOther(){this.closeLeft(),this.closeRight()}closeAll(){f.push("/"),this.history.value=[{route:"Dashboard",title:"router.dashboard"}]}getHistoryTab(){const e=[];return f.getRoutes().map(t=>e.push(...t.children)),this.history.value.filter(t=>e.some(a=>a.name==t.route))}}const O=new L,$={},D={class:"h-full w-full"};function M(s,e){return i(),B("div",D,[C(s.$slots,"default")])}const z=R($,[["render",M]]),K=["src"],q=I({__name:"index",setup(s){return(e,t)=>{const a=z,o=w("router-view"),c=T;return i(),r(c,null,{default:n(()=>[S(O).isRouterAlive.value?(i(),r(o,{key:0},{default:n(({Component:h,route:l})=>{var d;return[(d=l.meta.menu)!=null&&d.iframe_link?(i(),r(y,{key:0,appear:"",name:"el-fade-in-linear"},{default:n(()=>[x(a,null,{default:n(()=>{var u;return[E("iframe",{class:"w-full h-full",src:(u=l.meta.menu)==null?void 0:u.iframe_link,frameborder:"0"},null,8,K)]}),_:2},1024)]),_:2},1024)):(i(),r(y,{key:1,appear:"",name:"el-fade-in-linear"},{default:n(()=>[x(a,null,{default:n(()=>{var u;return[(i(),r(N,null,[(u=l.meta)!=null&&u.keepAlive?(i(),r(k(h),{key:l.path})):_("",!0)],1024)),l.meta.keepAlive?_("",!0):(i(),r(k(h),{key:l.path}))]}),_:2},1024)]),_:2},1024))]}),_:1})):_("",!0)]),_:1})}}});export{q as _,O as t};
